

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="baidu-site-verification" content="code-HJwAkkohj2" />
  <meta name="sogou_site_verification" content="2t6zxaPafe" />
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="残魁斜罡">
  <meta name="keywords" content="">
  
  <title>百度高效研发实战训练营Step4 - 技术匝记簿</title><meta name="robots" content="noindex">

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.ckxgzxa.top","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":false,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":"01f66cc4caefba46f8cad22b739f765a","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="技术匝记簿" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>残魁斜罡的小小簿记</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/%E9%A3%8E%E6%99%AF.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="百度高效研发实战训练营Step4">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-11-26 10:10" pubdate>
        2021年11月26日 上午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      7.8k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      82
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">百度高效研发实战训练营Step4</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2022年4月7日 晚上
                
              </p>
            
            <div class="markdown-body">
              <h1 id="百度高效研发实战训练营Step4"><a href="#百度高效研发实战训练营Step4" class="headerlink" title="百度高效研发实战训练营Step4"></a>百度高效研发实战训练营Step4</h1><p><a target="_blank" rel="noopener" href="http://bit.baidu.com/productsBuy?id=272">百度工程能力实战训练营线上课程</a></p>
<h2 id="1-代码检查规则：Java语言案例讲解"><a href="#1-代码检查规则：Java语言案例讲解" class="headerlink" title="1 代码检查规则：Java语言案例讲解"></a>1 代码检查规则：Java语言案例讲解</h2><h3 id="1-1-源文件规范"><a href="#1-1-源文件规范" class="headerlink" title="1.1 源文件规范"></a>1.1 源文件规范</h3><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111281859378.png"></p>
<h4 id="1-1-1-文件名"><a href="#1-1-1-文件名" class="headerlink" title="1.1.1 文件名"></a>1.1.1 文件名</h4><p>Java源文件名必须和它包含的顶层类名保持一致，包括大小写，并以**.java作为后缀名**。</p>
<h4 id="1-1-2-文件编码"><a href="#1-1-2-文件编码" class="headerlink" title="1.1.2 文件编码"></a>1.1.2 文件编码</h4><p>为保持编码风格的一致性，避免编码不一致导致的乱码问题，要求所有源文件编码<strong>必须使用UTF-8格式</strong>。</p>
<h4 id="1-1-3-特殊字符"><a href="#1-1-3-特殊字符" class="headerlink" title="1.1.3 特殊字符"></a>1.1.3 特殊字符</h4><p>特殊字符方面的规则主要是针对<strong>换行、缩进、空格</strong>等操作而制定，有以下强制规定：</p>
<ol>
<li>除换行符以外，<strong>ASCII空格（0x20）是唯一合法的空格字符</strong>。</li>
<li>由于不同系统将Tab转化成空格的数目不一致，统一使用空格进行缩进。</li>
<li>文件的换行符统一使用Unix格式（\n），而不要使用Windows格式（\r\n）。</li>
</ol>
<h3 id="1-2-源文件组织结构规范"><a href="#1-2-源文件组织结构规范" class="headerlink" title="1.2 源文件组织结构规范"></a>1.2 源文件组织结构规范</h3><blockquote>
<p>这一大类规则主要规定了源文件所应包含的具体组成部分和各个部分之间应遵循的一系列规则。</p>
<p><strong>对于源文件的组成部分，规定如下：</strong></p>
<p>源文件必须按顺序包含：许可证或版权声明、package语句、import语句、唯一的顶层类，四个方面的内容。</p>
<p>同时，每两个部分之间用一个空行进行分隔，不允许出现多余空行。对于以上四个方面的内容，每个组成部分又有相应的编码规则。</p>
</blockquote>
<h4 id="1-2-1-许可证或版权声明规范"><a href="#1-2-1-许可证或版权声明规范" class="headerlink" title="1.2.1 许可证或版权声明规范"></a>1.2.1 许可证或版权声明规范</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111281903514.png"></p>
<h4 id="1-2-2-package语句规范"><a href="#1-2-2-package语句规范" class="headerlink" title="1.2.2 package语句规范"></a>1.2.2 package语句规范</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111281911018.png"></p>
<h4 id="1-2-3-import语句规范"><a href="#1-2-3-import语句规范" class="headerlink" title="1.2.3 import语句规范"></a>1.2.3 import语句规范</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111281904436.png"></p>
<h4 id="1-2-4-类声明规范"><a href="#1-2-4-类声明规范" class="headerlink" title="1.2.4 类声明规范"></a>1.2.4 类声明规范</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111281905480.png"></p>
<h3 id="1-3-代码结构规范"><a href="#1-3-代码结构规范" class="headerlink" title="1.3 代码结构规范"></a>1.3 代码结构规范</h3><h4 id="1-3-1-花括号"><a href="#1-3-1-花括号" class="headerlink" title="1.3.1 花括号"></a>1.3.1 花括号</h4><p>花括号经常在<strong>类和方法定义以及代码块划分</strong>中使用，花括号在使用中常需要合理的换行操作进行配合。规定为：在非空代码块中使用花括号时要遵循<strong>K&amp;R风格（Kernighan and Ritchie Style）</strong>，三个主要原则为:</p>
<ol>
<li>在左花括号（{）前不能换行，在其后换行；</li>
<li>在右花括号（}）前应有换行；</li>
<li>表示终止的右花括号（}）后必须换行，否则，右花括号后不换行。</li>
</ol>
<h4 id="1-3-2-缩进与换行"><a href="#1-3-2-缩进与换行" class="headerlink" title="1.3.2 缩进与换行"></a>1.3.2 缩进与换行</h4><p>缩进与换行主要是为了保证代码风格的一致性，提升代码的可维护性。主要规范有：</p>
<ol>
<li><p>每次开始书写一个新代码块时，使用4个空格进行缩进，在代码块结束时，恢复之前的缩进级别。</p>
</li>
<li><p>每条语句之后都要换行，每行只能有一条完整语句。</p>
</li>
<li><p>除package语句和import语句外，代码单行字符数限制不超过120个。超出则需要换行，换行时，遵循如下五条原则：</p>
<blockquote>
<ol>
<li>第二行相对第一行缩进四个空格，从第三行开始，不再继续缩进。</li>
<li>运算符与下文一起换行，即运算符位于行首。</li>
<li>方法调用的标点符号与下文一起换行。</li>
<li>方法调用中的多个参数需要换行时，在逗号后进行。</li>
<li>在括号前不要换行。</li>
</ol>
</blockquote>
</li>
</ol>
<h4 id="1-3-3-空行"><a href="#1-3-3-空行" class="headerlink" title="1.3.3 空行"></a>1.3.3 空行</h4><p>合理使用空行可以提高代码的可读性，有利于后期维护。</p>
<p>对于空行的使用，有如下规范进行约束：</p>
<ol>
<li><strong>在类的不同成员间增加空行</strong>，包括：成员变量、构造函数、方法、内部类、静态初始化块、实例初始化块等。</li>
<li>两个成员变量声明之间可以不加空行。<strong>空行通常对于成员变量进行逻辑分组。</strong></li>
<li>方法体内，按需增加空行，以便从逻辑上对语句进行分组。</li>
<li>使用空行时，<strong>禁止使用连续的空行。</strong></li>
</ol>
<h4 id="1-3-4-其他说明"><a href="#1-3-4-其他说明" class="headerlink" title="1.3.4 其他说明"></a>1.3.4 其他说明</h4><p><strong><em>Java中有两种数组定义形式</em>，为规范代码书写形式，要求为：</strong></p>
<p>①类型与中括号紧挨相连来表示数组，即中括号写在数组名之前。</p>
<p><strong>而当注解与注释同时存在时，统一的规范要求为：</strong></p>
<p>②添加在类、方法、构造函数、成员属性上的注解直接写在注释块之后，每个注解独占一行。</p>
<p><strong>当同时存在多个修饰符时，需要<em>按照顺序书写</em>，顺序要求如下：</strong></p>
<p>public protected private abstract static final transient volatile synchronized native strictfp</p>
<p>排在首位的一定是访问修饰符，随后是abstract，即抽象类或抽象方法，紧接着是static、final。这是常见的几类修饰符，对于其他的修饰符，可以参考以上列举的顺序进行书写。</p>
<p><strong>为避免小写字母l与1混淆，有如下规定：</strong></p>
<p>长整型数字必须使用大写字母L结尾，以便于和数字1进行区分。</p>
<h3 id="1-4-命名规范"><a href="#1-4-命名规范" class="headerlink" title="1.4 命名规范"></a>1.4 命名规范</h3><h4 id="1-4-1-驼峰命名格式"><a href="#1-4-1-驼峰命名格式" class="headerlink" title="1.4.1 驼峰命名格式"></a>1.4.1 驼峰命名格式</h4><p>对于两种驼峰命名格式的使用范围，有如下规范：</p>
<ol>
<li>方法名、参数名、成员变量、局部变量都统一使用lowerCamelCase风格，即首字母小写的驼峰命名格式。</li>
<li>类名使用UpperCamelCase风格，即首字母大写的驼峰命名格式，以下情形例外：DO/BO/DTO/VO/AO/PO/UID等。</li>
</ol>
<h4 id="1-4-2-类的命名格式"><a href="#1-4-2-类的命名格式" class="headerlink" title="1.4.2 类的命名格式"></a>1.4.2 类的命名格式</h4><p>除此之外，对于一些类，命名格式有更加具体的规范要求：</p>
<ol>
<li>抽象类命名使用Abstract或Base开头；</li>
<li>异常类命名使用Exception结尾；</li>
<li>测试类命名以它要测试的类的名称开始，以Test结尾。</li>
</ol>
<h4 id="1-4-3-常量命名格式"><a href="#1-4-3-常量命名格式" class="headerlink" title="1.4.3 常量命名格式"></a>1.4.3 常量命名格式</h4><p>常量的命名规范：</p>
<p>①常量命名全部大写，单词间用下划线隔开。</p>
<p>②不允许任何未经预先定义的常量直接出现在代码中。</p>
<h3 id="1-5-OOP规约"><a href="#1-5-OOP规约" class="headerlink" title="1.5 OOP规约"></a>1.5 OOP规约</h3><p><strong>OOP规约主要是针对面向对象编程过程中定义的一些类所制定的一些规则。</strong></p>
<p>包含的强制规范要求有：</p>
<ol>
<li>所有的POJO类属性<strong>必须使用包装数据类型</strong>，禁止使用基本类型。</li>
<li>所有的覆写方法，<strong>必须加@Override注解。</strong></li>
<li>Object的equals方法容易抛空指针异常，应使用常量或确定有值的对象来调用equals。</li>
<li>定义DO/DTO/VO等POJO类时，均不要设定任何属性默认值。</li>
</ol>
<h3 id="1-6-集合处理规范"><a href="#1-6-集合处理规范" class="headerlink" title="1.6 集合处理规范"></a>1.6 集合处理规范</h3><p>集合和数组是我们开发过程中使用频度最高的两个数据结构，对于二者的使用也有严格的强制规范：</p>
<ol>
<li>当需要将集合转换为数组时，必须使用集合的toArray方法，传入的是类型完全一样的数组，大小是list.size()。</li>
<li>对一个集合求子集合时，需高度注意对原集合元素的增加或删除，均会导致子列表的遍历、增加、删除，产生ConcurrentModificationException异常。应通过对子集合进行相应操作，来反射到原集合，从而避免异常的发生。</li>
<li>不要在循环体内部进行集合元素的remove/add操作。remove元素请使用Iterator（迭代器）方式，如果并发操作，需要对Iterator对象加锁。</li>
</ol>
<h3 id="1-7-控制语句规范"><a href="#1-7-控制语句规范" class="headerlink" title="1.7 控制语句规范"></a>1.7 控制语句规范</h3><p>Java中的控制语句主要有<strong>switch、if、else、while等</strong>，这些语句的使用在编码过程中需要遵循以下规范：</p>
<ol>
<li>在一个switch块内，每个case要么通过break/return等来终止，要么注释说明程序将继续执行到哪一个case为止；在一个switch快内，都必须包含一个default语句并且放在最后。</li>
<li>使用if/else/for/while/do语句必须使用花括号。即使只有一行代码，避免采用单行的编码方式。</li>
<li>在高并发场景中，避免使用“等于”判断作为中断或退出的条件。防止在击穿现象下，程序无法正常中断或退出的情况发生。</li>
</ol>
<h3 id="1-8-注释规约"><a href="#1-8-注释规约" class="headerlink" title="1.8 注释规约"></a>1.8 注释规约</h3><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282007834.png"></p>
<p>合理使用注释可以提高程序可读性，便于后期维护。注释可以是程序说明，也可以是编程思路。<strong>Java中的注释主要分三种形式：文档注释、单行注释和多行注释。</strong>注释规约包括：</p>
<p>①类、类属性、类方法的注释必须使用文档注释形式，即使用 /<strong>内容</strong>/ 格式，不得使用单行注释的格式。单行注释和多行注释主要使用在方法体内。</p>
<p>②方法内部单行注释，在被注释语句上方另起一行，使用//注释。方法内部多行注释，使用/<em>内容</em>/注释，注意与代码对齐。</p>
<h3 id="1-9-异常处理规范"><a href="#1-9-异常处理规范" class="headerlink" title="1.9 异常处理规范"></a>1.9 异常处理规范</h3><p>在Java中，我们通常使用<strong>try catch来进行捕获异常处理</strong>，而Java中的异常又分为运行时异常和非运行时异常。</p>
<ol>
<li><strong>对于处理运行时异常，有如下规范：</strong>Java类库中定义的可以通过预检查方式规避的RuntimeException异常不应该通过try catch的方式来处理，比如：空指针异常和数组越界异常等等。</li>
<li><strong>对于捕获后异常的处理，有如下规范：</strong>捕获异常是为了处理异常，不要捕获后不进行任何处理而将其抛弃。若不想进行异常的处理，应将该异常抛给它的调用者。最外层的业务使用者必须处理异常，将其转化为用户可以理解的内容。即对于捕获后的异常，要么继续向上抛，要么自己进行处理。</li>
<li><strong>异常处理的规范要求还包括：</strong>不能在finally块中使用return语句。</li>
</ol>
<h3 id="1-10-缺陷检查规则"><a href="#1-10-缺陷检查规则" class="headerlink" title="1.10 缺陷检查规则"></a>1.10 缺陷检查规则</h3><p>缺陷检查主要是<strong>对Java源代码进行静态分析</strong>，扫描其中潜在的缺陷，比如：空指针异常、死循环等，这一阶段所应遵循的规则包括：</p>
<ol>
<li>不能使用单个字符定义StringBuffer和StringBuilder。</li>
<li>任何上锁的对象均需保证其锁可以被释放。</li>
<li>严格避免死循环的发生。</li>
<li>对于字符串中的点号（“.”）、竖线（“|”）和文件分隔符（“File.separator”）进行替代时，需要注意其特殊含义。</li>
</ol>
<blockquote>
<p><strong>“.”：匹配任意单个字符。</strong>在replaceAll中使用，它匹配所有内容。</p>
<p><strong>“|”：通常用作选项分隔符，</strong>它匹配字符间的空格</p>
<p><strong>“File.separator”：匹配特定平台的文件路径分隔符。</strong>在Windows上，这将被视为转义字符。</p>
</blockquote>
<ol start="5">
<li>当synchronize对成员变量进行上锁时，该成员变量必须是final类型的。</li>
<li>synchronize上锁的成员变量类型一定不能是装箱类型。</li>
<li>所有被spring托管的类，其成员属性的初始化<strong>均要使用注入的方式。</strong></li>
<li>当使用try catch方式进行异常捕获，且需要在catch中对异常信息进行输出时，不得使用printStackTrace的方式。这种方式会导致后期分析代码困难。而应<strong>采用一些Log框架，方便用户检索和浏览日志。</strong></li>
<li>方法返回值包含操作状态代码时，该状态码不应被忽略</li>
<li>【%s】数组具有协变性，元素赋值类型与初始化类型不一致，此种情况可通过编译，但运行阶段会发生错误。</li>
<li>对于用户名和密码不应直接写在Java的文件中，避免泄露。而应将相应关键信息写在配置文件中进行读取。</li>
<li>方法和成员变量的命名不应相同，也不应通过大小写来进行区分。</li>
</ol>
<h2 id="2-单元测试之Java实践"><a href="#2-单元测试之Java实践" class="headerlink" title="2 单元测试之Java实践"></a>2 单元测试之Java实践</h2><h3 id="2-1-如何写单元测试"><a href="#2-1-如何写单元测试" class="headerlink" title="2.1 如何写单元测试"></a>2.1 如何写单元测试</h3><h4 id="2-1-1-基本流程"><a href="#2-1-1-基本流程" class="headerlink" title="2.1.1 基本流程"></a>2.1.1 基本流程</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282024759.png"></p>
<p><strong>单元测试的基本流程如下：</strong></p>
<p>首先，环境初始化；</p>
<p>其次，准备输入参数；</p>
<p>再次，调用待测试方法；</p>
<p>然后，检查输出；</p>
<p>最后，测试完成后环境复原。</p>
<h4 id="2-1-2-测试替身"><a href="#2-1-2-测试替身" class="headerlink" title="2.1.2 测试替身"></a>2.1.2 测试替身</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282025752.png"></p>
<p><strong>测试替身可用于隔离被测试的代码、加速执行顺序、使得随机行为变得确定、模拟特殊情况以及能够使测试访问隐藏信息等。</strong></p>
<p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282025297.png"></p>
<p>常见的测试替身有四类：桩（Stub)、伪造对象（Fake)、测试间谋（Spy)以及模拟对象（Mock)。</p>
<ol>
<li>Stub(桩）:一般什么都不做，实现空的方法调用或者简单的硬编码返回即可。</li>
<li>Fake(伪造对象）:真实数据的简单版本，伪造真实对象的行为，但是没有副作用或者使用真实事物的其它后果。比如替换数据库的对象，而得到虚假的伪造对象。</li>
<li>Spy(测试间谋）:需要得到封闭对象内部状态的时候，就要用到测试间谋，事先学会反馈消息，然后潜入对象内部去获取对象的状态。测试间谋是一种测试替身，它用于记录过去发生的情况，这样测试在事后就能知道所发生的一切。</li>
<li>Mock(模拟对象）:模拟对象是一个特殊的测试间谋。是一个在特定的情况下可以配置行为的对象，规定了在什么情况下，返回什么样的值的一种测试替身。Mock已经有了非常成熟的对象库，包括JMock、Mockito和EasyMock等。</li>
</ol>
<blockquote>
<p><strong>重点讲解一下模拟对象（Mock)：</strong></p>
<p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282028940.png"></p>
<p>假如我们有业务逻辑→数据存取→数据这三层逻辑，现在需要对“业务逻辑”层进行单元测试，那么我们可以使用Mock对数据存取与数据层的内容进行模拟，从而使上面的单元测试是独立的。</p>
</blockquote>
<h4 id="2-1-3-设计思路"><a href="#2-1-3-设计思路" class="headerlink" title="2.1.3 设计思路"></a>2.1.3 设计思路</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282028962.png"></p>
<p><strong>如何设计单元测试：</strong></p>
<p>**单元测试case的核心:**结合具体的应用场景、具体的输入数据与当前函数的功能实现，对于输出数据作出具体的预期，即可把全部待测试的分支都罗列了出来。</p>
<p>即：<strong>应用场景+输入数据+功能实现=输出数据。</strong></p>
<h4 id="2-1-4-断言-Assertions"><a href="#2-1-4-断言-Assertions" class="headerlink" title="2.1.4 断言(Assertions)"></a>2.1.4 断言(Assertions)</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282029555.png"></p>
<p>断言是一种在java单元测试中经常使用的测试方法。在单元测试中，我们<strong>使用“断言”来检验当前的测试结果是成功还是失败。</strong></p>
<blockquote>
<p><strong>常见的断言：</strong></p>
<p>Assert.assertNotNull</p>
<p>Assert.assertEquals</p>
<p>Assert.assertTrue</p>
<p>Assert.assertFalse</p>
<p>Assert.fail     </p>
</blockquote>
<p><strong>在单元测试中使用断言可以令预测结果自动呈现，无需人工对单元测试结果进行判断。</strong></p>
<h3 id="2-2-单元测试的运行"><a href="#2-2-单元测试的运行" class="headerlink" title="2.2 单元测试的运行"></a>2.2 单元测试的运行</h3><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282031441.png"></p>
<h4 id="2-2-1-手动"><a href="#2-2-1-手动" class="headerlink" title="2.2.1 手动"></a>2.2.1 手动</h4><ol>
<li><strong>直接在IDE中执行</strong></li>
</ol>
<p>在开发编码完成之后，开发人员可以直接在自己的环境和编译器内运行单元测试。</p>
<ol start="2">
<li><strong>使用maven的mvn test</strong></li>
</ol>
<p>Maven是目前java开发中最流行的项目构建工具，它非常全面的包含了很多功能。mvn test这个测试模块就可以为我们的单元测试提供极大的便利。</p>
<h4 id="2-2-2-自动"><a href="#2-2-2-自动" class="headerlink" title="2.2.2 自动"></a>2.2.2 自动</h4><p><strong>持续集成（Jenkins）：</strong>自动化持续集成是我们在项目中常用的一种单元测试的方法。通用工具为Jenkins，Jenkins是一种持续集成的工具，它的功能非常强大。他的主要的功能有软件发布和版本测试、外部调用监控。</p>
<h3 id="2-3-如何判断单元测试的质量"><a href="#2-3-如何判断单元测试的质量" class="headerlink" title="2.3 如何判断单元测试的质量"></a>2.3 如何判断单元测试的质量</h3><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282032798.png"></p>
<p>衡量标准：</p>
<p>从<strong>主观层面</strong>，优秀的单元测试可读性高、易于维护、值得信赖.</p>
<p>从<strong>客观层面</strong>，使用单元测试代码覆盖率来衡。覆盖率工具包括：集成IDE和单独布署。</p>
<h2 id="3-如何做好-Code-Review"><a href="#3-如何做好-Code-Review" class="headerlink" title="3 如何做好 Code Review"></a>3 如何做好 Code Review</h2><h3 id="3-1-为什么要做好-Code-Review"><a href="#3-1-为什么要做好-Code-Review" class="headerlink" title="3.1 为什么要做好 Code Review"></a>3.1 为什么要做好 Code Review</h3><h4 id="3-1-1-Code-Review是提升代码质量的最好方法"><a href="#3-1-1-Code-Review是提升代码质量的最好方法" class="headerlink" title="3.1.1 Code Review是提升代码质量的最好方法"></a>3.1.1 Code Review是提升代码质量的最好方法</h4><p>强化Code Review是<strong>提升代码质量的第一选择。</strong></p>
<p>在代码开发过程中，我们越早发现问题、定位问题，在修复问题时付出的成本越小。</p>
<p>大约有50%以上的bug，都是在做Code Review时发现的。前期做好Code Review，后期将会减少反复修改等不必要的复工。</p>
<h4 id="3-1-2-Code-Review能够在团队内传递知识"><a href="#3-1-2-Code-Review能够在团队内传递知识" class="headerlink" title="3.1.2 Code Review能够在团队内传递知识"></a>3.1.2 Code Review能够在团队内传递知识</h4><p>从知识传递的角度看，<strong>Code Review是极为重要的。</strong></p>
<p>做好Code Review，能够帮助团队传递知识、沟通交流、互相学习，能够提升学习能力、提升编写代码能力、提升代码质量、提升工作效率、降低项目风险。</p>
<p>另外，基于codebase可以使我们了解项目全局，培养系统的思考方式。</p>
<h4 id="3-1-3-Code-Review是辅导怎么写代码的最好方法"><a href="#3-1-3-Code-Review是辅导怎么写代码的最好方法" class="headerlink" title="3.1.3 Code Review是辅导怎么写代码的最好方法"></a>3.1.3 Code Review是辅导怎么写代码的最好方法</h4><p>我们要意识到，做Code Review可以学习到别人的经验，同时也可以向别人传递我们的经验。</p>
<p>如果我们想辅导别人，<strong>最好的办法就是让对方先写一段代码，我们对他的代码进行Code Review。</strong>在辅导他人的过程中，我们可以快速地发现问题，从而帮助改进。</p>
<h4 id="3-1-4-做好Code-Review可以增加公司对最顶级开发者的吸引力"><a href="#3-1-4-做好Code-Review可以增加公司对最顶级开发者的吸引力" class="headerlink" title="3.1.4 做好Code Review可以增加公司对最顶级开发者的吸引力"></a>3.1.4 做好Code Review可以增加公司对最顶级开发者的吸引力</h4><p>工作中是否有Code Review对于公司或团队来说非常重要。不但对于公司或团队内的人员有所提升，而且能够吸引出色的开发者加入开发团队。</p>
<p>未做好Code Review的公司或团队有如下特点：</p>
<ol>
<li>代码质量差。</li>
<li>团队内人员备份差。</li>
<li>团队开发人员得不到有效的辅导，提高慢。</li>
</ol>
<h4 id="3-1-5-为什么要提高代码质量？"><a href="#3-1-5-为什么要提高代码质量？" class="headerlink" title="3.1.5 为什么要提高代码质量？"></a>3.1.5 为什么要提高代码质量？</h4><ol>
<li>提高代码质量可以提高代码的可读性。</li>
<li>提高代码质量可以提高代码的复用性和参考性。</li>
<li>提高代码质量可以减少bug出现的风险。</li>
<li>提高代码质量可以减少后期补丁的风险。</li>
<li>提高代码质量可以降低代码失控的风险。</li>
<li>提高代码质量可以降低项目重构和升级的麻烦。</li>
</ol>
<h4 id="3-1-6-为什么要提高写代码的能力"><a href="#3-1-6-为什么要提高写代码的能力" class="headerlink" title="3.1.6 为什么要提高写代码的能力"></a>3.1.6 为什么要提高写代码的能力</h4><ol>
<li>代码能力如果停滞不前，对于个人而言，将导致职业危机。</li>
<li>代码能力如果停滞不前，对于团队而言，将意味着团队没有成长。</li>
</ol>
<p><strong>Code Review是一个非常重要的提升代码质量和代码能力的手段。</strong>无论是从个人发展角度，还是团队发展角度，我们都需要重视Code Review。</p>
<h3 id="3-2-如何做好-Code-Review"><a href="#3-2-如何做好-Code-Review" class="headerlink" title="3.2 如何做好 Code Review"></a>3.2 如何做好 Code Review</h3><h4 id="3-2-1-在Code-Review中可能发现的问题"><a href="#3-2-1-在Code-Review中可能发现的问题" class="headerlink" title="3.2.1 在Code Review中可能发现的问题"></a>3.2.1 在Code Review中可能发现的问题</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282043808.png"></p>
<h4 id="3-2-2-在Code-Review中应有的态度"><a href="#3-2-2-在Code-Review中应有的态度" class="headerlink" title="3.2.2 在Code Review中应有的态度"></a>3.2.2 在Code Review中应有的态度</h4><ol>
<li><p>对所有检查的代码逻辑要做到“完全看懂”，对于审核的代码，熟悉程度要做到“如数家珍”。如果在审核代码后，对代码的逻辑和背后的原因仍然很模糊，则是一个失败的Code Review。</p>
</li>
<li><p>好代码的标准，不仅仅是“可以运行通过”，在正确性、可读性、可重用性、可运维性等方面上，都需要综合考虑。</p>
</li>
<li><p>建立Code Review和写代码一样重要的意识。即：</p>
<blockquote>
<ol>
<li>Code Review和写代码一样，也有产出，即产出更高质量的代码。</li>
<li>审核代码在很多情况下比写代码还要辛苦，需要理解和找出问题等。</li>
</ol>
</blockquote>
</li>
<li><p>以提升代码质量为最终目标。</p>
</li>
<li><p>要投入足够的时间和精力。</p>
<blockquote>
<pre><code>        1. 审核代码花费的时间经常和写代码一样多，有时甚至比写代码的时间更多，要有时间意识。
        1. 要有责任意识。如果出现bug，不仅仅是写代码人员的职责，也不仅仅是QA的职责，代码审核者也需要承担相当大的责任。
</code></pre>
</blockquote>
</li>
</ol>
<h4 id="3-2-3-在Code-Review之前，需要了解一流代码的特性"><a href="#3-2-3-在Code-Review之前，需要了解一流代码的特性" class="headerlink" title="3.2.3 在Code Review之前，需要了解一流代码的特性"></a>3.2.3 在Code Review之前，需要了解一流代码的特性</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282046798.png" alt="一流代码的特性"></p>
<p><strong>一流代码有以下特性：①高效性；②鲁棒性；③简洁；④简短；⑤可共享；⑥可测试；⑦可移植；⑧可监控；⑨可运维；⑩可扩展。</strong></p>
<p>将以上十条标准进行总结精简归纳为：</p>
<blockquote>
<ol>
<li>代码的正确和性能；</li>
<li>代码的可读和可维护性；</li>
<li>代码的可运维和可运行；</li>
<li>代码的可共享和可重用；</li>
</ol>
</blockquote>
<p>在Code Review时，综合考虑以上一流代码的特性，可以快速提升代码质量、提升编写代码的能力等。</p>
<h4 id="3-2-4-在Code-Review时，需要有对-bad-code-进行简单判断的能力"><a href="#3-2-4-在Code-Review时，需要有对-bad-code-进行简单判断的能力" class="headerlink" title="3.2.4 在Code Review时，需要有对 bad code 进行简单判断的能力"></a>3.2.4 在Code Review时，需要有对 bad code 进行简单判断的能力</h4><p><strong>通常bad code有以下特点：</strong></p>
<ol>
<li>5分钟内不能看懂的代码。</li>
</ol>
<p>​        不能快速看懂的代码，一定是有问题的代码，可以先抛回给编写代码人员进行修正。<strong>一般一个函数的操作不能超过6个step</strong>，如果超过这个数量，则需要重新调整编码逻辑。</p>
<ol start="2">
<li>需要思考才能看懂的代码。</li>
</ol>
<p>​        好的代码阅读时基本不用动脑子，甚至看注释就能看懂。</p>
<ol start="3">
<li>需要来回翻屏才能看懂的代码。</li>
</ol>
<p>​        好的代码，经常在一屏内就是一个完整的逻辑。</p>
<ol start="4">
<li>没有空行或注释的代码。</li>
</ol>
<p>​        在Code Review时，发现不会用段落、不会写注释的代码，肯定不是好的程序员写的代码，可以直接打回给编写代码人员进行修正。</p>
<h4 id="3-2-5-Code-Review的注意事项"><a href="#3-2-5-Code-Review的注意事项" class="headerlink" title="3.2.5 Code Review的注意事项"></a>3.2.5 Code Review的注意事项</h4><ol>
<li>在必要时，review的双方做<strong>面对面的沟通。</strong></li>
</ol>
<p>​        面对面沟通并不是单指当面沟通，还包括云共享、电话、视频沟通等。在沟通时，对于背景、关键点等应进行说明，便于reviewer的理解。在必要时，应提供设计文档。</p>
<ol start="2">
<li>对于关键模块，应该建<strong>立owner制度。</strong></li>
</ol>
<p>​        所有提交的代码，必须由owner做最终确认。由owner掌握全局，并建立明确的责任关系。</p>
<ol start="3">
<li><p>检查中发现的问题，要一追到底。</p>
</li>
<li><p>要<strong>注意细节。</strong>对每一行提交的代码，都要进行检查。</p>
</li>
<li><p><strong>Code Review的方式，要小步快跑。</strong>每次提交review的代码量不要太多，降低复杂度。在特殊情况时，比如一个新模块的构建，最好逐步完成，通过多次进行提交。</p>
</li>
<li><p>要为Code Review<strong>预留出足够的时间。</strong>Code Review VS Coding的时间，有时可能达到1:1。在这里需要考虑到有时会做大的修改，科学地规划工作量，尽量避免出现时间倒排。</p>
</li>
<li><p>注意每天 review代码的数量不宜过多。</p>
</li>
</ol>
<h4 id="3-2-6-Code-Review的步骤"><a href="#3-2-6-Code-Review的步骤" class="headerlink" title="3.2.6 Code Review的步骤"></a>3.2.6 Code Review的步骤</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282051436.png" alt="、"></p>
<p>Code Review的步骤为以下几点：</p>
<p><strong>Step1：先看系统全貌</strong></p>
<p>不深究细节，浏览系统全貌，理清模块划分的逻辑、模块间的关系、如何构成的整个系统等。</p>
<p><strong>Step2：进入模块级别</strong></p>
<p>同样不深究细节，浏览模块内的全貌，判断模块切分是否合理，理清模块内的逻辑，明确关键数据、关键的类和函数等。</p>
<p><strong>Step3：理清类、函数内部的逻辑。</strong></p>
<p><strong>Step4：进入细节。</strong></p>
<p>比如Layout、命名等。</p>
<h4 id="3-2-7-人为因素"><a href="#3-2-7-人为因素" class="headerlink" title="3.2.7 人为因素"></a>3.2.7 人为因素</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282053170.png"></p>
<p>除了代码上的问题，在Code Review过程中还会有一些人为因素，例如：</p>
<p><strong>①QA人员</strong></p>
<p>好的QA人员不仅仅会发现系统中的bug，还会质疑或提出产品需求，挑战或优化系统架构和实现方式。</p>
<p><strong>②Code Reviewer</strong></p>
<p>好的代码审核人员不仅仅指出代码表面的问题，还会检查系统需求分析的质量、接口或函数定义的合理性、模块划分的合理性、系统关键机制的合理性等。</p>
<h3 id="3-3-例子：Python-代码的-Code-Review"><a href="#3-3-例子：Python-代码的-Code-Review" class="headerlink" title="3.3 例子：Python 代码的 Code Review"></a>3.3 例子：Python 代码的 Code Review</h3><h4 id="3-3-1-Python的编码规范"><a href="#3-3-1-Python的编码规范" class="headerlink" title="3.3.1 Python的编码规范"></a>3.3.1 Python的编码规范</h4><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282111474.png"></p>
<ul>
<li><p>代码要写的漂亮。</p>
</li>
<li><p>代码要<strong>明确直接</strong>，不要含蓄表达。</p>
</li>
<li><p>代码要<strong>简洁</strong>，一个函数可以实现的功能就不要写两个函数。</p>
</li>
<li><p><strong>代码深奥胜过代码复杂</strong>。代码可以写的深奥难懂，但是不能写的过于复杂。</p>
</li>
<li><p>代码要<strong>平铺直叙</strong>，不要层层嵌套。</p>
</li>
<li><p>代码要做到<strong>合理间隔。</strong></p>
</li>
<li><p>代码<strong>可读性</strong>非常重要。</p>
</li>
<li><p>代码要有普适性。尽量规避代码特殊性，用最简洁最通用的代码来实现。</p>
</li>
<li><p>代码要实用。</p>
</li>
<li><p>要重视所有发现的错误。</p>
</li>
<li><p>代码逻辑要清晰。在含糊混乱的面前，我们要拒绝猜测。读写代码时，不要出现“好像”、“可能”、“似乎”等猜测。当一段代码很难懂的时候，代码一定存在问题。</p>
</li>
<li><p>写代码要注重行动。</p>
</li>
<li><p>代码实现方法要简洁。如果一个方法很难解释，就意味着这个方法存在一定的问题。</p>
</li>
<li><p>要重视命名空间的使用。</p>
</li>
</ul>
<h4 id="3-3-2关于Python编程规范的部分说明"><a href="#3-3-2关于Python编程规范的部分说明" class="headerlink" title="3.3.2关于Python编程规范的部分说明"></a>3.3.2关于Python编程规范的部分说明</h4><p>Python编程规范有九个维度。</p>
<p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282113051.png"></p>
<h5 id="1-模块的划分"><a href="#1-模块的划分" class="headerlink" title="1 模块的划分"></a>1 模块的划分</h5><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282118231.png"></p>
<p>我们要对模块有概念，这是整个系统的基础。</p>
<ol>
<li><p>一个.py文件是一个模块。</p>
</li>
<li><p>模块的划分对软件的长期维护非常重要。</p>
</li>
<li><p>每个模块都应该有特定的功能。</p>
</li>
</ol>
<blockquote>
<p>比如：配置文件的读取，网页文件的写入，网页文件的解析，一个内存数据表，一个抓取的线程等等。</p>
</blockquote>
<ol start="4">
<li>多个本应独立的模块，写到一个.py文件中是常见的错误。从Code Review角度看，首先就是要看模块切分的对不对。</li>
</ol>
<h5 id="2-数据的封装"><a href="#2-数据的封装" class="headerlink" title="2 数据的封装"></a>2 数据的封装</h5><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282117284.png"></p>
<p>在Code Review时，要着重注意数据是否封装这一问题。</p>
<h5 id="3-import"><a href="#3-import" class="headerlink" title="3 import"></a>3 import</h5><p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282118516.png"></p>
<p>Import在使用过程中，禁止使用from xxx import yyy语法直接导入类或函数。禁止使用from xxx import *这样的方法。这样做的目标是：容易判断代码中使用外部变量或函数的来源。</p>
<p>如果使用禁止中的语法，会大大增加判断来源的难度，以及代码阅读的难度。</p>
<p>在Code Review时，遇到这种情况，及时将代码打回给编程人员进行修正。</p>
<h5 id="4-异常"><a href="#4-异常" class="headerlink" title="4 异常"></a>4 异常</h5><p>对于异常的处理有以下几点需要注意：</p>
<p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282120853.png"></p>
<blockquote>
<ol>
<li>异常的使用</li>
</ol>
<p>​        使用异常前请需要详细了解异常的行为。不要主动抛出异常，使用返回值。如果一定要抛异常，需要注释进行说明。</p>
<ol start="2">
<li>异常的获取强制</li>
</ol>
<p>​        除非重新抛出异常，否则禁止使用except:捕获所有异常，不建议捕获Exception或StandardError。</p>
<p>​        在实际编码中建议try中的代码尽可能少，避免catch住未预期的异常，掩藏掉真正的错误。底线是至少要打印异常的日志，而不是捕获后直接pass通过。</p>
<p>​        在对异常进行处理时尽量针对特定操作的特定异常来捕获。</p>
<ol start="3">
<li>函数的返回值</li>
</ol>
<p>​        如果函数会抛出异常，需要在函数的注释中明确说明。</p>
</blockquote>
<p>在Code Review时，需要注意上述问题，及时返回给编程人员进行修正。</p>
<h5 id="5-构造函数"><a href="#5-构造函数" class="headerlink" title="5 构造函数"></a>5 构造函数</h5><p>对于构造函数有以下几点需要注意：</p>
<ol>
<li>规范：</li>
</ol>
<p>类构造函数应该尽量简单，不能包含可能失败或过于复杂的操作。</p>
<ol start="2">
<li>解读：</li>
</ol>
<p>在构造函数中常出现的错误是：无法判断、或捕获异常。</p>
<h5 id="6-函数返回值"><a href="#6-函数返回值" class="headerlink" title="6 函数返回值"></a>6 函数返回值</h5><p>对于函数返回值有以下几点需要注意：</p>
<ol>
<li>规范：</li>
</ol>
<blockquote>
<p>函数返回值必须小于等于3个。返回值超过3个时必须通过class/namedtuple/dict等具名形式进行包装。</p>
</blockquote>
<ol start="2">
<li>解读：</li>
</ol>
<blockquote>
<p>a. 多数情况下的错误，是因为很多人不会思考和设计函数的语义。</p>
<p>函数描述涉及的三要素为：功能描述、传入参数描述和返回值描述。</p>
<p>每个函数都应该有足够明确的语义。基于函数的语义，函数的返回值有三种类型：</p>
<p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282122993.png"></p>
<p>b .另外，函数需要有返回值，对于正确或错误的情况，在返回值中要有体现。</p>
<p>c .还有一个问题是：Python的数据格式不需要定义，过于灵活。当程序规模变大、维护周期变长时，会导致后期极难维护。</p>
<p>应对措施是：多写注释，写清楚返回值说明、参数说明。</p>
</blockquote>
<p><img src="https://zxastaticpages.oss-cn-beijing.aliyuncs.com/BlogPictures/202111282123350.png"></p>
<p>在Code Review时，注释未写清楚的代码，一定要打回给编程人员，进行修正、补注释。</p>
<h5 id="7-代码长度"><a href="#7-代码长度" class="headerlink" title="7 代码长度"></a>7 代码长度</h5><p>关于代码长度有以下几点需要注意：</p>
<ol>
<li>每行不得超过120个字符。避免在终端上显示出现折行。</li>
<li>函数长度不得超过100行。函数过长会增加理解函数逻辑的难度。Python的函数应尽量控制在30~40行之间。</li>
</ol>
<p>在Code Review时，代码过长，建议全部打回给编程人员进行修正。</p>
<h5 id="8-空行、空格"><a href="#8-空行、空格" class="headerlink" title="8 空行、空格"></a>8 空行、空格</h5><p>关于空行、空格有以下几点需要注意：</p>
<ol>
<li>空行</li>
</ol>
<p>​        文件及定义之间隔两个空行。比如类或全局函数。类方法之间隔一个空行。</p>
<ol start="2">
<li>空格</li>
</ol>
<p>​        逗号、分号、冒号前不加空格，后边加一个空格。所有二元运算符前后各加一个空格。</p>
<p>在Code Review时，需要着重注意空行和空格。空行和空格不是可有可无的。空行和空格的存在，是为了增加可读性。不好读的代码，一律打回给编程人员进行修正。</p>
<h5 id="9-注释"><a href="#9-注释" class="headerlink" title="9 注释"></a>9 注释</h5><p>关于注释有以下几点需要注意：</p>
<p>Python中的注释有一个特殊之处是docstring，<strong>docstring要和“＃”注意区分开。</strong></p>
<blockquote>
<p>相关规范有：</p>
<ol>
<li><p>使用docstring描述module、 function 、class和method接口时，<strong>docstring必须用三个双引号括起来。</strong></p>
</li>
<li><p>对外接口部分必须用docstring描述。内部接口视情况自行决定是否写docstring。</p>
</li>
<li><p>接口的docstring描述<strong>至少包括功能简介、参数、返回值。</strong>如果可能抛出异常，必须使用注释进行说明。</p>
</li>
<li><p><strong>每个文件都必须有文件声明</strong>，文件声明必须包括以下信息：版权声明、功能和用途简介、修改人及联系方式。</p>
</li>
</ol>
</blockquote>
<p>在Code Review时，不符合上述规范的，及时打回给编程人员进行修正。</p>
<h3 id="3-4-如何成为一个好的reviewer"><a href="#3-4-如何成为一个好的reviewer" class="headerlink" title="3.4 如何成为一个好的reviewer"></a>3.4 如何成为一个好的reviewer</h3><p>代码审核的质量，和审核者的代码能力直接相关。代码审核的质量差，反映的是审核者的代码水平。如果作为一个代码审核员不会写代码，就要承认真相，并且要不断提高自己的代码能力。</p>
<p>学习资料：</p>
<ol>
<li>关于代码的书籍：《编写可读代码的艺术》，《代码整洁之道》。</li>
<li>综合的书籍：《代码大全》，《201  principles of software development》。</li>
<li>其他：《代码的艺术》课程，Python Good Coder考试指南。</li>
</ol>
<h3 id="3-5-公司针对-Code-Review-的措施"><a href="#3-5-公司针对-Code-Review-的措施" class="headerlink" title="3.5 公司针对 Code Review 的措施"></a>3.5 公司针对 Code Review 的措施</h3><p><strong>1、建立高效可运营的代码审核机制，提升代码质量，降低代码评审成本。</strong></p>
<blockquote>
<p>①基于平台：icode+bugbye</p>
<p>②代码检查规则分级，分为ERROR、WARNING、ADVICE三类，对ERROR级别阻塞提交。</p>
<p>③通过统计数据驱动代码检测规则的优化。</p>
</blockquote>
<p><strong>2、通过工程能力地图考察项目的Code Review情况。</strong></p>
<p><strong>3、所有的Code Review行为，都基于icode平台进行。良好的工具可以帮助更好的进行代码审核</strong></p>
<h3 id="3-6-Code-Review-总结"><a href="#3-6-Code-Review-总结" class="headerlink" title="3.6 Code Review 总结"></a>3.6 Code Review 总结</h3><!-- flag of hidden posts -->
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%99%BE%E5%BA%A6%E9%AB%98%E6%95%88%E7%A0%94%E5%8F%91%E5%AE%9E%E6%88%98%E8%AE%AD%E7%BB%83%E8%90%A5/">百度高效研发实战训练营</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                  
                
                
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'CKXGZXA/GitPageComments');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        湘ICP备2021018734号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43052102000188"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" alt="police-icon"/>
            
            <span>湘公网安备 43052102000188号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->




  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  








  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?01f66cc4caefba46f8cad22b739f765a";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
